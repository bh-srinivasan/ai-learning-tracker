{% extends "base.html" %} {% block title %}Manage Users - Admin Panel{% endblock
%} {% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
  <h2><i class="fas fa-users"></i> Manage Users</h2>
  <a href="{{ url_for('admin_add_user') }}" class="btn btn-primary">
    <i class="fas fa-user-plus"></i> Add New User
  </a>
</div>

<div class="card">
  <div class="card-body">
    {% if users %}
    <div class="table-responsive">
      <table class="table table-hover">
        <thead>
          <tr>
            <th>ID</th>
            <th>Username</th>
            <th>Status</th>
            <th>Level</th>
            <th>User Level</th>
            <th>Points</th>
            <th>Joined</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for user in users %}
          <tr>
            <td>{{ user.id }}</td>
            <td>{{ user.username }}</td>
            <td>
              <span
                class="badge bg-{% if user.status == 'active' %}success{% else %}danger{% endif %}"
              >
                {{ user.status|title }}
              </span>
            </td>
            <td>
              <span
                class="badge bg-{% if user.level == 'Expert' %}danger{% elif user.level == 'Intermediate' %}warning{% elif user.level == 'Learner' %}info{% else %}secondary{% endif %}"
              >
                {{ user.level }}
              </span>
            </td>
            <td>
              <span
                class="badge bg-{% if user.user_selected_level == 'Expert' %}danger{% elif user.user_selected_level == 'Intermediate' %}warning{% elif user.user_selected_level == 'Learner' %}info{% else %}secondary{% endif %}"
              >
                {{ user.user_selected_level }}
              </span>
            </td>
            <td>{{ user.points }}</td>
            <td>{{ user.created_at }}</td>
            <td>
              <div class="btn-group" role="group">
                <form
                  method="POST"
                  action="{{ url_for('admin_pause_user', user_id=user.id) }}"
                  style="display: inline"
                >
                  {% if user.status == 'active' %}
                  <button
                    type="submit"
                    class="btn btn-sm btn-warning"
                    onclick="return confirm('Are you sure you want to pause this user?')"
                  >
                    <i class="fas fa-pause"></i> Pause
                  </button>
                  {% else %}
                  <button
                    type="submit"
                    class="btn btn-sm btn-success"
                    onclick="return confirm('Are you sure you want to activate this user?')"
                  >
                    <i class="fas fa-play"></i> Activate
                  </button>
                  {% endif %}
                </form>
                <form
                  method="POST"
                  action="{{ url_for('admin_delete_user', user_id=user.id) }}"
                  style="display: inline"
                >
                  <button
                    type="submit"
                    class="btn btn-sm btn-danger"
                    onclick="return confirm('Are you sure you want to delete this user? This action cannot be undone.')"
                  >
                    <i class="fas fa-trash"></i> Delete
                  </button>
                </form>
              </div>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    {% else %}
    <div class="text-center py-5">
      <i class="fas fa-users fa-4x text-muted mb-4"></i>
      <h4 class="text-muted">No users found</h4>
      <p class="text-muted mb-4">Start by adding your first user.</p>
      <a href="{{ url_for('admin_add_user') }}" class="btn btn-primary btn-lg">
        <i class="fas fa-user-plus"></i> Add First User
      </a>
    </div>
    {% endif %}
  </div>
</div>
{% endblock %}
